# CI Failure Analysis

The unit tests failed with 8 test failures across two main categories: issue cache handling and orchestrator session management. The failures indicate that recent changes to issue caching logic have broken existing functionality.

The first category involves two tests in tests/utils/github_operations/test_issue_cache.py (TestAdditionalIssuesParameter class). The log message "Issue #123: no longer exists in repository" appears in both failures, suggesting that the cache is now filtering out or rejecting issues differently than expected. The test_additional_issues_fetched_and_cached expects 2 issues but only gets 1, and test_additional_issues_skipped_if_in_cache expects 1 issue but gets 0. This points to changes in mcp_coder/utils/github_operations/issues/cache.py around line 247 where the "no longer exists" logic resides.

The second category involves three tests in tests/workflows/vscodeclaude/test_closed_issues_integration.py that verify closed issue handling. All three tests fail because closed issues are being completely excluded from results rather than being included with a "(Closed)" marker. The test_process_eligible_issues_excludes_closed expects 1 filtered issue but gets 0, while both status display tests expect "(Closed)" text in the output but receive empty tables. The log shows "Skipping closed issue #414" from orchestrator.py:1015, indicating the filtering happens too early in the workflow pipeline.

The third category consists of three tests in tests/workflows/vscodeclaude/test_orchestrator_sessions.py that all fail with "ValueError: GitHub token not found" when calling IssueManager.__init__. These tests for restart_closed_sessions functionality are failing because the _build_cached_issues_by_repo function at orchestrator.py:865 creates IssueManager instances without properly mocking or providing GitHub credentials in the test environment. The issue originates from base_manager.py:170 where token validation occurs.

To fix these failures, the following changes are needed: (1) Review and adjust the issue existence check in cache.py:247 to ensure it doesn't incorrectly filter out valid additional issues, (2) Modify the closed issue filtering logic in orchestrator.py and related integration code to include closed issues in results with proper "(Closed)" markers rather than excluding them entirely, and (3) Update the orchestrator session tests to properly mock the IssueManager initialization or handle the GitHub token requirement in test scenarios.