# CI Failure Analysis

The CI pipeline failed with 9 test failures across three main categories: issue cache parameter handling, closed issue integration, and orchestrator session management. The failures indicate regressions introduced by recent changes to the issue caching and closed issue handling logic.

The first two failures in test_issue_cache.py show that the additional_issues parameter behavior changed. The test expects get_issue to not be called when issues are already cached, but it's being called anyway. Additionally, the log message format changed from "Failed to fetch issue #123" to "Failed to fetch additional issue #123 for repo", breaking the log assertion test. These failures point to changes in src/mcp_coder/utils/github_operations/issues/cache.py around line 247-287.

The three closed issue integration test failures in test_closed_issues_integration.py indicate that closed issues are being filtered out completely instead of being displayed with "(Closed)" status. The process_eligible_issues function returns 0 issues instead of 1, and the status display no longer shows the closed status marker. This suggests changes to the issue filtering logic in src/mcp_coder/workflows/vscodeclaude/orchestrator.py around line 1005 where closed issues are being skipped too aggressively, likely removing them from display entirely rather than marking them as closed.

The remaining four failures in test_orchestrator_cache.py and test_orchestrator_sessions.py show that _build_cached_issues_by_repo is being called unconditionally when it shouldn't be. The function is being invoked even with empty session lists, and it's attempting to instantiate IssueManager without proper token mocking in tests, causing ValueError exceptions. The issue is in src/mcp_coder/workflows/vscodeclaude/orchestrator.py around line 860-918, where the cache building logic needs to check for empty sessions or unconfigured repos before attempting to create IssueManager instances. The tests expect _build_cached_issues_by_repo to short-circuit when there are no sessions to process.